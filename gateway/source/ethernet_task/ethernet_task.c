/**
*********************************************************************************************************
*                                        		gateway
*                                      (c) Copyright 2021-2031
*                                         All Rights Reserved
*
* @File    : 
* @By      : liwei
* @Version : V0.01
* 
*********************************************************************************************************
**/

/*
*********************************************************************************************************
Includes 
*********************************************************************************************************
*/
#include "hc32f46x_clk.h"
#include "FreeRTOS.h"
#include "task.h"
#include "ethernet_task.h"
#include "ethernet_data_handle.h"
#include "ethernet_operation.h"
#include "string.h"
#include "stdlib.h"
#include "debug_bsp.h"
#include "user_type.h"
#include "broker_task.h"

/*
*********************************************************************************************************
Define
*********************************************************************************************************
*/
#define STATE_INIT 0
#define STATE_RUN1 1

#define STATE_MAX  2
/*
*********************************************************************************************************
Typedef
*********************************************************************************************************
*/

/*
*********************************************************************************************************
Variables
*********************************************************************************************************
*/
TaskHandle_t ethernet_task_handler;

static u8 ethernet_task_state = STATE_INIT;

const callback_void_void ethernet_callback[2]=
{
	ethernet_driver_init,
	ethernet_run,
};
/*
*********************************************************************************************************
Function 
*********************************************************************************************************
*/
	
/**
*********************************************************************************************************
* @名称	: 
* @描述	: 以太网任务 处理W5500初始化  TCP连接
*********************************************************************************************************
**/
void ethernet_task(void *pvParameters)
{
	while(1)
	{
		if(ethernet_task_state < STATE_MAX)
			ethernet_callback[ethernet_task_state]();	
	}

}
/**
*********************************************************************************************************
* @名称	: 
* @描述	: 切换任务状态
*********************************************************************************************************
**/
void ethernet_task_state_channge(u8 state)
{
	ethernet_task_state = state;
	debug_printf("网络任务状态切换到状态%d\r\n",state); /*提示信息*/
}

/***********************************************END*****************************************************/

